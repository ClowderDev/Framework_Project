@model IEnumerable<OrderModel>

@{
    ViewData["Title"] = "Lịch sử đơn hàng của: " + @ViewBag.UserEmail;
}

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width" />
</head>

<body style="font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px;">

    <h3 style="text-align: center; color: #333; margin-bottom: 30px;">
        Lịch sử đơn hàng của: @ViewBag.UserEmail
    </h3>

    <table
        style="width: 90%; margin: auto; border-collapse: collapse; background-color: white; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <thead>
            <tr style="background-color: #E30019; color: white;">
                <th style="padding: 12px; border: 1px solid #ddd;">ID</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Mã sản phẩm</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Phí vận chuyển</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Mã giảm giá</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Tổng tiền</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Tổng tiền giảm</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Tên người dùng</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Tình trạng</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Hình thức thanh toán</th>
                <th style="padding: 12px; border: 1px solid #ddd;">Ngày đặt</th>
                
                <th style="padding: 12px; border: 1px solid #ddd;">Thao tác</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr style="border-bottom: 1px solid #ddd; transition: background-color 0.3s;"
                    onmouseover="this.style.backgroundColor='#f1f1f1'" onmouseout="this.style.backgroundColor='white'">
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.Id</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.OrderCode</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.ShippingCost.ToString("#,##0 đ")</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.CouponCode</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.TotalAmount.ToString("#,##0 đ")</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.DiscountAmount.ToString("#,##0 đ")</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.UserName</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">
                        @if (item.Status == 1)
                        {
                            <span style="color: green;">Đơn hàng mới</span>
                        }
                        else if (item.Status == 2)
                        {
                            <span style="color: green;">Đã giao hàng</span>
                        }
                        else
                        {
                            <span style="color: red;">Đã hủy</span>
                        }
                    </td>
                    <td style="padding: 10px; border: 1px solid #ddd;">
                        @if (item.PaymentMethod == "COD" || item.PaymentMethod == null)
                        {
                            <span style="color: green;">Thanh toán khi nhận hàng</span>
                        }
                        else if (item.PaymentMethod == "Momo")
                        {
                            <span style="color: green;">Thanh toán qua MoMo</span>
                        }
                        else if (item.PaymentMethod == "VNPay")
                        {
                            <span style="color: green;">Thanh toán qua Vnpay</span>
                        }
                    </td>
                    <td style="padding: 10px; border: 1px solid #ddd;">@item.CreatedDate.ToString("dd-MM-yyyy")</td>

                    <td style="border: 1px solid #ddd; width: 150px; text-align: center;">
                        <a onclick="return confirm('Bạn xác nhận muốn hủy?')"
                            href="@Url.Action("CancelOrder", "Account", new { ordercode = item.OrderCode })"
                            style="background-color: #ffc107; color: black; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 14px;">
                            Hủy đơn hàng
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

</body>

</html>
